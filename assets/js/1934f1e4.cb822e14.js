"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4656],{6579:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"configuration/modules/custom_module","title":"Custom Modules","description":"This special module type lets you extend the functionality of Ashell","source":"@site/docs/configuration/modules/custom_module.md","sourceDirName":"configuration/modules","slug":"/configuration/modules/custom_module","permalink":"/ashell/docs/next/configuration/modules/custom_module","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14},"sidebar":"docsSidebar","previous":{"title":"Settings","permalink":"/ashell/docs/next/configuration/modules/settings"},"next":{"title":"\ud83c\udfa8 Appearance","permalink":"/ashell/docs/next/configuration/appearance/"}}');var t=o(7259),l=o(9796);const s={sidebar_position:14},c="Custom Modules",d={},a=[{value:"Configuration",id:"configuration",level:2},{value:"<code>listen_cmd</code>",id:"listen_cmd",level:2},{value:"Example Output",id:"example-output",level:3},{value:"Dynamic Icons",id:"dynamic-icons",level:2},{value:"Icons Example",id:"icons-example",level:3},{value:"Alerts",id:"alerts",level:2},{value:"Alerts Example",id:"alerts-example",level:3},{value:"Examples",id:"examples",level:2},{value:"Text-only Module (e.g., Custom Clock)",id:"text-only-module-eg-custom-clock",level:3},{value:"Button Module with Icon (Interactive)",id:"button-module-with-icon-interactive",level:3},{value:"Button Module with Icon Only",id:"button-module-with-icon-only",level:3},{value:"Button Module with Text Output",id:"button-module-with-text-output",level:3},{value:"Notifications (with wired)",id:"notifications-with-wired",level:3},{value:"App Launcher (with walker)",id:"app-launcher-with-walker",level:3},{value:"Clipboard (with cliphist)",id:"clipboard-with-cliphist",level:3},{value:"Migration from Deprecated Modules",id:"migration-from-deprecated-modules",level:2},{value:"Previous App Launcher Configuration",id:"previous-app-launcher-configuration",level:3},{value:"New Custom Module Configuration",id:"new-custom-module-configuration",level:3},{value:"Previous Clipboard Configuration",id:"previous-clipboard-configuration",level:3},{value:"New Custom Module Configuration",id:"new-custom-module-configuration-1",level:3}];function r(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"custom-modules",children:"Custom Modules"})}),"\n",(0,t.jsx)(n.p,{children:"This special module type lets you extend the functionality of Ashell\nby creating your own simple components."}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"custom module"})," allows you to:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Display the output of a command (live updates from a continuously running process)."}),"\n",(0,t.jsx)(n.li,{children:"Run a command when the module is clicked."}),"\n",(0,t.jsx)(n.li,{children:"Change icons dynamically based on output."}),"\n",(0,t.jsx)(n.li,{children:"Show an alert indicator based on specific conditions."}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:"Ashell comes with a set of default icons that are used internally."}),(0,t.jsx)(n.p,{children:"If you specify a font icon in the custom module configuration remember\nto install the font with that icon on your system."}),(0,t.jsxs)(n.p,{children:["For example you can use ",(0,t.jsx)(n.a,{href:"https://www.nerdfonts.com/",children:"Nerd Fonts"})]})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsx)(n.p,{children:"To define a custom module, use the following fields:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"name"}),": Name of the module. Use this to refer to it in the ",(0,t.jsx)(n.a,{href:"/ashell/docs/next/configuration/modules/",children:"modules definitions"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"type"})," ",(0,t.jsx)(n.em,{children:"(optional)"}),": Display type. Can be ",(0,t.jsx)(n.code,{children:"Button"})," (clickable, default) or ",(0,t.jsx)(n.code,{children:"Text"})," (display only)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"icon"}),": Icon displayed in the status bar (for ",(0,t.jsx)(n.code,{children:"button"})," type)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"command"}),": Command to execute when the module is clicked (for ",(0,t.jsx)(n.code,{children:"button"})," type)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"listen_cmd"})," ",(0,t.jsx)(n.em,{children:"(optional)"}),": Command to run in the background to update the module\u2019s display."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"icons"})," ",(0,t.jsx)(n.em,{children:"(optional)"}),": Regex-to-icon mapping to change the icon based on the ",(0,t.jsx)(n.code,{children:"listen_cmd"})," output (for ",(0,t.jsx)(n.code,{children:"button"})," type`). The first matching regex wins; since the mappings are stored as a map, the evaluation order is not guaranteed. Prefer mutually exclusive regexes or keep patterns precise to avoid ambiguous matches."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"alert"})," ",(0,t.jsx)(n.em,{children:"(optional)"}),": Regex to trigger a red alert dot on the icon when\nmatched in the ",(0,t.jsx)(n.code,{children:"listen_cmd"})," output (for ",(0,t.jsx)(n.code,{children:"button"})," type)."]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"listen_cmd",children:(0,t.jsx)(n.code,{children:"listen_cmd"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"listen_cmd"})," is started once on startup and should continuously run in the background,\noutputting JSON whenever the module's display should be updated. The most recent output\nis used to update the module's display."]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.mdxAdmonitionTitle,{children:["How ",(0,t.jsx)(n.code,{children:"listen_cmd"})," Works"]}),(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"listen_cmd"})," is ",(0,t.jsx)(n.strong,{children:"not"})," executed periodically. Instead, it runs as a long-lived process\nthat outputs JSON whenever the displayed information changes. This is ideal for:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Status monitoring"}),": Commands that watch for changes and output when they occur"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Event listeners"}),": Commands that wait for specific events and report them"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Live data"}),": Commands that continuously stream status updates"]}),"\n"]}),(0,t.jsx)(n.p,{children:"For example, a notification listener might output JSON only when new notifications arrive,\nrather than polling every second."})]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"listen_cmd"})," should output JSON in\nthe ",(0,t.jsx)(n.a,{href:"https://github.com/Alexays/Waybar/wiki/Module:-Custom#script-output",children:"Waybar format"}),",\nusing ",(0,t.jsx)(n.code,{children:"text"})," and ",(0,t.jsx)(n.code,{children:"alt"})," fields."]}),"\n",(0,t.jsx)(n.h3,{id:"example-output",children:"Example Output"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "text": "3",\n  "alt": "notification"\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"dynamic-icons",children:"Dynamic Icons"}),"\n",(0,t.jsxs)(n.p,{children:["You can change the icon depending on the value of ",(0,t.jsx)(n.code,{children:"alt"})," in the ",(0,t.jsx)(n.code,{children:"listen_cmd"})," output."]}),"\n",(0,t.jsx)(n.h3,{id:"icons-example",children:"Icons Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:"icons.'dnd.*' = \"\uf1f7\"\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This will change the icon to ",(0,t.jsx)(n.code,{children:"\uf1f7"})," when ",(0,t.jsx)(n.code,{children:"alt"})," matches ",(0,t.jsx)(n.code,{children:"dnd.*"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"alerts",children:"Alerts"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"alert"})," field to show a red dot on the module icon if the output\nmatches a given regex."]}),"\n",(0,t.jsx)(n.h3,{id:"alerts-example",children:"Alerts Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'alert = ".*notification"\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.h3,{id:"text-only-module-eg-custom-clock",children:"Text-only Module (e.g., Custom Clock)"}),"\n",(0,t.jsxs)(n.p,{children:["Text modules display only the text output from ",(0,t.jsx)(n.code,{children:"listen_cmd"})," without any click action:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "MyClock"\ntype = "Text"\nlisten_cmd = "echo \'{\\"text\\": \\"$(date +\'%H:%M\')\\", \\"alt\\": \\"\\"}\'"\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note for Fish Shell Users"}),": If you use Fish shell, wrap the command in ",(0,t.jsx)(n.code,{children:"sh -c"})," for POSIX compatibility:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'listen_cmd = "sh -c \'while true; do echo \\"{\\\\\\"text\\\\\\": \\\\\\"$(date +\\"%H:%M\\")\\\\\\", \\\\\\"alt\\\\\\": \\\\\\"\\\\\\"}\\"; sleep 1; done\'"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"button-module-with-icon-interactive",children:"Button Module with Icon (Interactive)"}),"\n",(0,t.jsx)(n.p,{children:"Button modules display an icon and/or text with a click action:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "CustomNotifications"\ntype = "Button"\nicon = "\uf0a2"\ncommand = "swaync-client -t -sw"\nlisten_cmd = "swaync-client -swb"\nicons.\'dnd.*\' = "\uf1f7"\nalert = ".*notification"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"button-module-with-icon-only",children:"Button Module with Icon Only"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "AppLauncher"\ntype = "Button"\nicon = "\udb85\uddfc"\ncommand = "walker"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"button-module-with-text-output",children:"Button Module with Text Output"}),"\n",(0,t.jsxs)(n.p,{children:["Button modules can also display text output from ",(0,t.jsx)(n.code,{children:"listen_cmd"})," with a click action:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "Clipboard"\ntype = "Button"\ncommand = "cliphist-rofi-img | wl-copy"\nlisten_cmd = "echo \'{\\"text\\": \\"\ud83d\udccb\\", \\"alt\\": \\"\\"}\'"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"notifications-with-wired",children:"Notifications (with wired)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "CustomNotifications"\ntype = "Button"\nicon = "\uf0a2"\ncommand = "wired --show 5"\nlisten_cmd = "wired count"\nicons.\'dnd.*\' = "\uf1f7"\nalert = ".*notification"\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "CustomNotifications"\nicon = "\uf0a2"\ncommand = "swaync-client -t -sw"\nlisten_cmd = "swaync-client -swb"\nicons.\'dnd.*\' = "\uf1f7"\nalert = ".*notification"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"app-launcher-with-walker",children:"App Launcher (with walker)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "AppLauncher"\nicon = "\udb85\uddfc"\ncommand = "walker"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"clipboard-with-cliphist",children:"Clipboard (with cliphist)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[[CustomModule]]\nname = "Clipboard"\nicon = "\ud83d\udccb"\ncommand = "cliphist-rofi-img | wl-copy"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"migration-from-deprecated-modules",children:"Migration from Deprecated Modules"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"AppLauncher"})," and ",(0,t.jsx)(n.code,{children:"Clipboard"})," modules have been deprecated in favor of custom modules.\nTo migrate from the deprecated modules:"]}),"\n",(0,t.jsx)(n.h3,{id:"previous-app-launcher-configuration",children:"Previous App Launcher Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# Old deprecated way\napp_launcher_cmd = "walker"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"new-custom-module-configuration",children:"New Custom Module Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# New recommended way\n[[CustomModule]]\nname = "AppLauncher"\nicon = "\ufffd"\ncommand = "walker"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"previous-clipboard-configuration",children:"Previous Clipboard Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# Old deprecated way\nclipboard_cmd = "cliphist-rofi-img | wl-copy"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"new-custom-module-configuration-1",children:"New Custom Module Configuration"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'# New recommended way\n[[CustomModule]]\nname = "Clipboard"\nicon = "\udb80\udd4f"\ncommand = "cliphist-rofi-img | wl-copy"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Then add the custom modules to your modules configuration:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[modules]\nright = [ [ "Clock", "Privacy", "Settings", "AppLauncher", "Clipboard" ] ]\n'})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}},9796:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>c});var i=o(6363);const t={},l=i.createContext(t);function s(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);